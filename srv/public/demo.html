<script src="http://cdn.binaryjs.com/0/binary.js"></script>
<style>
	body {
		font-family: Avenir;
		font-size: 34px;
		margin: 20px;
		background: url(congruent_pentagon.png);
	}
	#swag {
		
		padding: 50px;
		background: whiteSmoke;
		box-shadow: 0 0 20px gray;
		width: 500px;
		margin-left: auto;
		margin-right: auto;
		margin-top: 20%;

		text-align: center;

	}
</style>

<div id="swag">
	<span style="color: brown">Wow.</span> <span style="color: orange">Such</span> <span style="color: green">Typography</span>.

	<div style="font-family: Menlo; font-size: 14px; margin-top: 20px">
		curl http://hy.protobowl.com:3000/end -F filedata=@yolo.png
	</div>
</div>

<script>
var client = BinaryClient('ws://' + location.host);
client.on('open', function(stream){
	// var stream = client.createStream({file: 'hello.txt'});
	// stream.write('Hello');
	// stream.write('World!');
	// stream.end();

	console.log('wumbo')

	client.on('stream', function(stream, meta){
		var parts = [];
		stream.on('data', function(data){ parts.push(data); });
		stream.on('end', function(){
			var url = (window.URL || window.webkitURL).createObjectURL(new Blob(parts));
			document.body.style.backgroundImage = 'url(' + url + ')';
		});
		// var file = fs.createWriteStream(meta.file);
		// stream.pipe(file);
		console.log(stream, meta)
	}); 
});
</script>